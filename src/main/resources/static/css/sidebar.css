/* 사이드바 컴포넌트 */
.sidebar{
  position: fixed;
  top:0;
  left:0;
  width:var(--sidebar-w);
  min-height:100vh;
  background:var(--panel);
  border-top-right-radius:var(--radius);
  border-bottom-right-radius:var(--radius);
  padding:24px 18px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  box-shadow: 0px 0px 10px 2px rgba(0, 0, 0, 0.19);
  z-index: 10; /* 다른 콘텐츠 위에 표시되도록 z-index 추가 */
}

/* 로고 */
.sidebar .logo{
  font-weight:800;
  font-size:30px;
  margin: 9px 0;
  text-align:center;
  text-decoration:none;
  color:var(--ink);
  display:block;
  padding:10px 0;
  border-radius:12px;
  transition:background .15s;
}

.sidebar .logo:hover {
  background:#f2f2f2;
}

/* 프로필(아이콘 왼쪽 + 텍스트 오른쪽) */
.sidebar .profile{
  display:flex;
  flex-direction:row;
  align-items:center;
  column-gap:20px;
  padding-left:6px;
}
.sidebar .profile img{
  width:40px;
  height:40px;
  border-radius:30%;
  object-fit:cover;
  display:block;
  box-shadow: var(--shadow);
}
.sidebar .profile .name{
  margin:0;
  font-size:16px;
  font-weight:600;
  line-height:1.1;
  text-align:left;
}
.sidebar .profile .handle{
  margin:2px 0 0;
  font-size:12px;
  color:var(--muted);
  text-align:left;
}

/* 프로필 링크 */
.sidebar .profile-link {
  text-decoration: none;
  color: inherit;
  display: flex;
  align-items: center;
  border-radius: 12px;
  transition: background .15s;
  padding: 10px 6px;
  margin-bottom: 50px;
}

.sidebar .profile-link:hover {
  background:#f2f2f2;
}

/* 메뉴 */
.sidebar .menu{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-top:8px;
  flex:1;
}
.sidebar .menu a{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  text-decoration:none;
  color:var(--ink);
  transition:background .15s;
}
.sidebar .menu a:hover{
  background:#f2f2f2;
}
.sidebar .menu a.active{
  background:#111;
  color:#fff;
  border-radius:999px;
  font-weight:700;
}
.sidebar .menu a i{
  width:18px;
  text-align:center;
}

.sidebar .menu .menu-bottom {
  margin-top: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* 진행 현황(재사용 가능 카드) */
.sidebar .bottom{
  margin-top:16px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.sidebar .study-card{
  background:var(--primary);
  color:#fff;
  border-radius:18px;
  padding:16px;
  width:150px;
  box-shadow:2px 3px 4px rgba(0,0,0,.12);
  display:grid;
  grid-template-rows:auto 1fr;
  row-gap:10px;
  flex-shrink: 0;
}
.sidebar .study-head .title{
  display:block;
  font-size:14px;
  font-weight:900;
}
.sidebar .study-head .subtitle{
  display:block;
  font-size:12px;
  opacity:.95;
}

.sidebar .study-bottom{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
}
.sidebar .big-percent{
  font-size:28px;
  font-weight:900;
  letter-spacing:.4px;
}

/* =========================
   도넛(진행 링) — SVG 벡터 버전 (계단현상 제거)
   ※ 기존 conic-gradient, ::after 방식 제거
   ========================= */

/** 도넛 컨테이너
 * @desc   외부에서 --progress(0~100)만 갱신하면 됨
 * @return 벡터 렌더링으로 매끈한 링
 */
.sidebar .ring{
  --p: var(--progress, 0);  /* 외부 JS에서 setProperty('--progress', n) */
  width:58px;
  height:58px;
  display:inline-grid;
  place-items:center;
}

/** SVG(벡터) */
.sidebar .ringSvg{
  width:100%;
  height:100%;
  display:block;
  transform: rotate(-90deg);                /* 12시 방향 시작 */
  shape-rendering: geometricPrecision;      /* 벡터 렌더링 품질 */
  text-rendering: geometricPrecision;
  image-rendering: optimizeQuality;
  overflow: visible;
}

/** 트랙(비진행 구간) */
.sidebar .ringTrack{
  fill:none;
  stroke:#e5e7eb;          /* 트랙 색 */
  stroke-width:6px;        /* 링 두께 */
  stroke-linecap:round;
}

/** 진행(한 가지 색상) */
.sidebar .ringValue{
  fill:none;
  stroke:#111;             /* 진행 색(한 가지) */
  stroke-width:6px;
  stroke-linecap:round;
  stroke-dasharray:100;                      /* pathLength=100 기준 */
  stroke-dashoffset: calc(100 - var(--p));   /* %만큼 채우기 */
  transition: stroke-dashoffset .4s ease;    /* 부드러운 변화 */
}

/** 중앙 텍스트를 쓰실 경우(선택)
.sidebar .ringLabel{
  grid-area: 1 / 1;
  font-weight:900;
  font-size:12px;
  color:#111;
}
*/

/* 로그아웃 메뉴 아이콘 전용 */
.sidebar .menu-bottom a img {
  width:18px;          /* 사이즈 통일 */
  height:18px;
  object-fit:contain;  /* 비율 유지 */
  vertical-align:middle;
  margin-right:6px;    /* 텍스트와 간격 */
}

/* 접근성: 사이드바만 단독 사용 시 main 없는 페이지 대비 */
@media (max-width: 920px){
  main{padding:20px;}
}

/* =========================
    알림 버튼 및 패널 스타일
   ========================= */
/* --- 알림 버튼 스타일 --- */
.menu-bottom a#notification-bell {
  position: relative; /* 뱃지 위치의 기준점 */
}

.notification-badge {
  position: absolute;
  top: 8px;           /* 버튼 상단에서의 위치 */
  right: 12px;          /* 버튼 오른쪽에서의 위치 */
  min-width: 20px;
  height: 20px;
  padding: 0 6px;     /* 숫자 길이에 따라 유연하게 늘어나도록 */
  border-radius: 10px;/* 원 모양 */
  background-color: #ef4444; /* 눈에 띄는 빨간색 */
  color: white;
  font-size: 12px;
  font-weight: 600;
  line-height: 20px; /* 텍스트 세로 중앙 정렬 */
  text-align: center;
  box-sizing: border-box;
}

/* --- 알림 패널 스타일 --- */
.notifications-panel {
  position: fixed; /* 화면 기준 고정 */
  top: 0;
  left: var(--sidebar-w); /* 사이드바 바로 오른쪽에 위치 */
  width: 320px; /* 패널 너비 */
  height: 100%;
  background-color: var(--bg); /* 사이트 기본 배경색 */

  border-radius: var(--radius);
  box-shadow: 4px 0 20px rgba(0,0,0,0.08);

  display: flex;
  flex-direction: column;

  /* ✨ 애니메이션을 위한 초기 상태 (왼쪽으로 숨김) */
  transform: translateX(-100%);
  visibility: hidden;
  opacity: 0;
  transition: transform 0.3s ease-in-out, visibility 0.3s, opacity 0.3s;
  z-index: 998; /* 다른 요소들 위에 보이도록 */
}

/* --- 알림 패널이 열렸을 때의 스타일 --- */
/* ✨ body에 is-notification-open 클래스가 추가되면 동작 */
body.is-notification-open .notifications-panel {
  transform: translateX(0); /* 알림 패널을 제자리로 이동 */
  visibility: visible;
  opacity: 1;
}


/* --- 알림 패널 내부 요소 스타일 --- */
.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  flex-shrink: 0; /* 크기가 줄어들지 않도록 */
}
.panel-header h3 { margin: 0; font-size: 18px; }
#notification-close-btn {
  background: none; border: none; font-size: 24px; cursor: pointer; color: #9ca3af;
  padding: 0; line-height: 1;
}

.notification-list {
  list-style: none;
  padding: 0;
  margin: 0;
  overflow-y: auto; /* 내용이 길어지면 스크롤 */
  flex-grow: 1; /* 남은 공간을 모두 차지 */
}
.notification-list li a,
.notification-list li p {
  display: block;
  padding: 12px 20px;
  border-bottom: 1px solid #f3f4f6;
  text-decoration: none;
  transition: background-color 0.2s;
}
.notification-list li a:hover,
.notification-list li p:hover { background-color: var(--panel); }

/* ✨ 읽지 않은 알림은 is-unread 클래스로 구분 */
.notification-list li.is-unread a {
  background-color: rgba(66, 88, 190, 0.05); /* var(--primary)의 연한 버전 */
}

.noti-title { color: var(--ink); font-weight: 600; font-size: 14px; }
.noti-content { color: var(--muted); font-size: 13px; margin: 4px 0; }
.noti-time { color: #9ca3af; font-size: 12px; }

.panel-footer {
  padding: 16px 20px;
  text-align: center;
  border-top: 1px solid #e5e7eb;
  flex-shrink: 0;
}
.panel-footer a { color: var(--primary); text-decoration: none; font-weight: 600; }