<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/defaultLayout}">
    <head>
        <title>Home</title>
        <th:block layout:fragment="css">
            <link rel="stylesheet" th:href="@{/css/home.css}">
        </th:block>
    </head>
    <body>
        <section class="mainGrid" aria-label="메인 영역" layout:fragment="content">

            <!-- 좌: 운영실 + 새로운 질문 (2단 블록) -->
            <div class="leftCol">
                <!-- /** 운영실
                    @desc   파란색 헤더(클릭 → operations.html) + 본문(공지 리스트)
                    @param  없음
                    @return 없음(UI) */ -->
                <section class="stackCard" aria-label="운영실">
                    <a class="sectionHead" href="operations.html">運営室</a>
                    <div class="sectionBody">
                    <ul class="noticeList">
                        <li><a href="notice1.html">09/02(화) 20:00~21:00 네트워크 점검</a></li>
                        <li><a href="notice2.html">09/05(금) 과제 제출 마감</a></li>
                    </ul>
                    </div>
                </section>

                <!-- /** 새로운 질문
                    @desc   파란색 헤더(클릭 → question_submit.html) + 본문(입력창)
                    @param  없음
                    @return 없음(UI) */ -->
                <!-- <section class="stackCard" aria-label="새로운 질문">
                    <a class="sectionHead" href="question_submit.html">新しい質問</a>
                    <div class="sectionBody">
                        <div class="askBox" role="search">
                            <input type="text" id="newQuestionInput" placeholder="回答する" aria-label="답변 입력" />
                            <button class="btn-search" type="button" onclick="location.href='question_submit.html'">登録</button>
                        </div>
                    </div>
                </section> -->
            </div>

            <!-- 중: 검색 → 좌석배치도(비율 유지) -->
            <div class="centerCol">

                <!-- 검색(중앙 컬럼 너비 = 좌석배치도 너비) -->
                <div class="search-row" role="search">
                    <div class="search-input">
                        <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
                        <input type="text" placeholder="検索ワードを入力してください" aria-label="검색어" />
                    </div>
                    <button class="btn-search" aria-label="검색 버튼">検索</button>
                </div>

                <!-- 좌석배치도 -->
                <section class="seatmapCard card" aria-label="좌석배치도 카드">
                    <div class="seatmap" aria-label="강의실 좌석배치도" style="--cols:16; --rows:10;">
                        <!-- 상단 슬림 라벨 바 -->
                        <div class="block labelBar" style="grid-column:3 / span 9; grid-row:1 / span 1;">大講義室</div>
                        <div class="block labelBar" style="grid-column:14 / span 3; grid-row:1 / span 1;">ラウンジ</div>

                        <!-- 세로 복도 3개 -->
                        <div class="corridor" style="grid-column:5  / span 1; grid-row:3 / span 8;"></div>
                        <div class="corridor" style="grid-column:9  / span 1; grid-row:3 / span 8;"></div>
                        <div class="corridor" style="grid-column:13 / span 1; grid-row:3 / span 8;"></div>

                        <!-- 좌측 세로열 -->
                        <a class="block small" style="grid-column:1 / span 2; grid-row:3 / span 1; text-decoration:none;">ルーム5</a>
                        <a class="block small" style="grid-column:1 / span 2; grid-row:4 / span 1; text-decoration:none;">ルーム4</a>
                        <a class="block small" style="grid-column:1 / span 2; grid-row:5 / span 1; text-decoration:none;">ルーム3</a>
                        <a class="block small" style="grid-column:1 / span 2; grid-row:6 / span 1; text-decoration:none;">ルーム2</a>
                        <a class="block small" style="grid-column:1 / span 2; grid-row:7 / span 1; text-decoration:none;">ルーム1</a>
                        <div class="block small gray"  style="grid-column:1 / span 2; grid-row:8 / span 1;">倉庫</div>
                        <div class="block small label" style="grid-column:1 / span 2; grid-row:9 / span 1;">面接室2</div>
                        <div class="block small label" style="grid-column:1 / span 2; grid-row:10 / span 1;">面接室1</div>

                        <!-- 좌측 2열 -->
                        <a class="block small" style="grid-column:3 / span 2; grid-row:3 / span 1; text-decoration:none;">ルーム10</a>
                        <a class="block small room" href="#" style="grid-column:3 / span 2; grid-row:4 / span 1; text-decoration:none; background:#cfe0ff;">ルーム9</a>
                        <a class="block small" style="grid-column:3 / span 2; grid-row:5 / span 1; text-decoration:none;">ルーム8</a>
                        <a class="block small room" href="#" style="grid-column:3 / span 2; grid-row:6 / span 1; text-decoration:none; background:#cfe0ff;">ルーム7</a>
                        <a class="block small room" href="#" style="grid-column:3 / span 2; grid-row:7 / span 1; text-decoration:none; background:#cfe0ff;">ルーム6</a>
                        <div class="block gray" style="grid-column:3 / span 2; grid-row:8 / span 3; font-size:12px;">事務室</div>

                        <!-- 가운데 왼 열 -->
                        <div class="block"       style="grid-column:6 / span 3; grid-row:3 / span 2;">講義室4</div>
                        <div id="lectureRoom3" class="block room reservable clickable-block" style="grid-column:6 / span 3; grid-row:5 / span 2; background:#cfe0ff;">講義室3</div>
                        <div class="block"       style="grid-column:6 / span 3; grid-row:7 / span 2;">講義室2</div>
                        <div class="block"       style="grid-column:6 / span 3; grid-row:9 / span 2;">講義室1</div>

                        <!-- 가운데 오른 열 -->
                        <div class="block" style="grid-column:10 / span 3; grid-row:3 / span 2;">講義室8</div>
                        <div class="block" style="grid-column:10 / span 3; grid-row:5 / span 2;">講義室7</div>
                        <div class="block" style="grid-column:10 / span 3; grid-row:7 / span 2;">講義室6</div>
                        <div class="block" style="grid-column:10 / span 3; grid-row:9 / span 2;">講義室5</div>

                        <!-- 우측 열 (라운드 강조) -->
                        <div class="block reservable clickable-block" style="grid-column:14 / span 3; grid-row:3 / span 2; border-radius:22px; background:#cfe0ff;">講義室12</div>
                        <div class="block reservable clickable-block" style="grid-column:14 / span 3; grid-row:5 / span 2; border-radius:22px; background:#cfe0ff;">講義室11</div>
                        <div class="block"       style="grid-column:14 / span 3; grid-row:7 / span 2; border-radius:22px;">講義室10</div>
                        <div class="block"       style="grid-column:14 / span 3; grid-row:9 / span 2; border-radius:22px;">講義室9</div>
                    </div>
                </section>
            </div>

            <!-- 우: 일정 -->
            <div class="rightCol">
                <section class="card" aria-label="일정">
                    <h3 class="sectionTitle">日程</h3>
                    <ul class="scheduleList">
                    <li>예시) 09/03(수) 팀 프로젝트 킥오프</li>
                    <li>예시) 09/05(금) 과제 제출 마감</li>
                    </ul>
                </section>
            </div>

            <!-- 3강의실 좌석배치도 -->
            <div id="seatModal" class="modal-overlay">
                <div class="modal-content">
                    <button class="close-button" aria-label="닫기">&times;</button>
                    <img th:src="@{/images/seat/roomseat(3).png}" alt="3강의실 좌석배치도 이미지">
                </div>
            </div>

        </section>

        <th:block layout:fragment="script">
            <script>
                const openModalBtn = document.getElementById('lectureRoom3');
                const modal = document.getElementById('seatModal');
                const closeModalBtn = modal.querySelector('.close-button');
                const modalOverlay = modal.closest('.modal-overlay');

            // '講義室3' 클릭 시 모달 열기
            openModalBtn.addEventListener('click', (e) => {
                e.preventDefault();
                modal.style.display = 'flex';
            });

            // 닫기 버튼 클릭 시 모달 닫기
            closeModalBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });

            // 모달 바깥 영역 클릭 시 모달 닫기
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    modal.style.display = 'none';
                }
            });
            </script>
        </th:block>
    </body>
</html>